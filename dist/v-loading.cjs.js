'use strict';

const setStyle = (ele, obj) => {
  for (const key of Object.keys(obj)) {
    ele.style[key] = `${obj[key]}`;
  }
};
const getStyle = (ele, attr) => {
  return document.defaultView.getComputedStyle(ele)[attr];
};

const clearBorder = (ele, data, duration = 600) => {
  setStyle(ele, {
    "borderBottom": "0 solid transparent",
    "transition": `border-bottom ${duration}ms`
  });
  setTimeout(() => {
    setStyle(ele, {
      "transition": "none"
    });
    (data) && (data.phase = -1);
  }, duration);
};

const clearHeight = (ele, data, duration = 600) => {
  let color = getStyle(ele, "backgroundColor");
  setStyle(ele, {
    height: "0",
    background: color,
    transition: `height ${duration}ms`
  });
  setTimeout(() => {
    setStyle(ele, {
      "transition": "none"
    });
    (data) && (data.phase = -1);
  }, duration);
};

const clearLoadingImg = (ele) => {
  setStyle(ele, {
    background: "none"
  });
};

const setBorder = (ele, value, color = "#f0f0f0") => {
  setStyle(ele, {
    "borderBottom": `${value}px solid ${color}`,
    transition: "none",
  });
};

const setHeight = (ele, value, color ="#f0f0f0") => {
  setStyle(ele, {
    height: `${value}px`,
    background: color,
    transition: "none"
  });
};

const setLoadingImg = (ele, src="./loading.gif") => {
  let color = getStyle(ele, "backgroundColor");
  setStyle(ele, {
    background: `url(${src}) center/4em no-repeat ${color}`
  });
};

const defaultOptions = {
  max: 80,
  bg: "#f0f0f0",
  cb: () => {},
  stage1Begin: () => {},
  stage2Begin: (ele) => {
    setLoadingImg(ele);
  },
  stage1End: () => {},
  stage2End: () => {
    clearLoadingImg(ele);
  },
  stage2: () => {},
  duration: 250,
};

const updateDataInStart = (data, e, options) => {
  let ele = options.ele,
  [top, bottom] = topAndBottom(ele);
  if(data.phase === -1 && (top || bottom)) {
    data.start = e.touches[0].pageY;
    data.phase = 0;
    data.top = top;
    data.bottom = bottom;
  }
};
const updateDataInMove = (data, e, options) => {
  let move = e.touches[0].pageY,
    start = data.start,
    ele = options.ele,
    [top, bottom] = topAndBottom(ele),
    y = move - start,
    positive = y >= 0,
    negative = y <= 0;
  if(data.phase === 0 || data.phase === 1) {
    if(top && positive || bottom && negative) {
      data.phase = 1;
      data.y = y;
      data.positive = positive;
      data.negative = negative;
      data.top = top;
      data.bottom = bottom;
    }
  }

  // (data.phase === 0) && (data.phase = 1);
  // if(data.phase === 1) {
  //   data.y = move - start;
  //   data.positive = data.y >= 0;
  //   data.negative = !data.positive;
  //   data.top = ele.scrollTop === 0;
  //   data.bottom = ele.scrollTop + ele.clientHeight === ele.scrollHeight;
  // }
};

const updateDataInCancel = (data, e, options) => {
  // if(data.top || data.bottom) {
  //   (data.phase === 1) && (data.phase = 2)
  // }
  let ele = options.ele,
    [top, bottom ] = topAndBottom(ele);
  data.top = top;
  data.bottom = bottom;
};

const topAndBottom = (ele) => {
  return [
    ele.scrollTop === 0,
    ele.scrollTop + ele.clientHeight >= ele.scrollHeight
  ]
};

class VLoading {
  constructor(ele, options) {
    this.ele = ele;
    this.options = Object.assign(defaultOptions, options, { ele });
    this.data = {
      top: false,     // 是否触顶
      bottom: false,  // 是否触底
      y: 0,           // 路程位移
      start: 0,       // 起点位移
      phase: -1,      // 0:touchstart, 1:touchmove, 2:touchend/cancel, -1, no events
    };
    this.insertTopLoading();
    this.insertBottomLoading();
    this.init();
  }
  insertTopLoading() {
    const loading = this.options.topLoading;
    if(loading)
      return;
    let firstNode = this.ele.firstElementChild,
      div = document.createElement("div");
    this.ele.insertBefore(div, firstNode);
    this.options.topLoading = div;
  }
  insertBottomLoading() {
    const bottomLoading = this.options.bottomLoading;
    if(bottomLoading)
      return;
    let lastNode = this.ele.lastElementChild,
      div = document.createElement("div");
    this.ele.insertBefore(div, lastNode.nextSibling);
    this.options.bottomLoading = div;
  }
  init() {
    let ele = this.ele,
      data = this.data,
      topLoading = this.options.topLoading,
      bottomLoading = this.options.bottomLoading,
      cb = this.options.cb,
      max = this.options.max,
      bg = this.options.bg,
      duration = this.options.duration,
      stage1Begin = this.options.stage1Begin,
      stage2Begin = this.options.stage2Begin,
      stage1End = this.options.stage1End,
      stage2End = this.options.stage1End;
    window.data = data;
    ele.addEventListener("touchstart", (e) => {
      updateDataInStart(data, e, this.options);
    });

    ele.addEventListener("touchmove", (e) => {
      updateDataInMove(data, e, this.options);
      if(data.phase === 0)
        return;
      if(data.phase === -1) {
        return;
      }
      if(data.phase === 2) {
        e.preventDefault();
        return;
      }
      if(data.top) {
        e.preventDefault();
        let y = data.y;

        if(y >= max) {
          y = (y - max) / 2;
          stage2Begin(topLoading);
          setBorder(topLoading, y, bg);
        } else {
          stage1Begin(topLoading);
          setHeight(topLoading, y, bg);
        }
      }
      if(data.bottom) {
        // e.preventDefault();
        let y = -data.y;
        if(y >= max) {
          y = (y - max) / 2;
          stage2Begin(bottomLoading);
          setBorder(bottomLoading, y, bg);
        } else {
          stage1Begin(bottomLoading);
          setHeight(bottomLoading, y, bg);
        }
      }

      // }
    }, {passive: false});
    ele.addEventListener("touchend", (e) => {
      updateDataInCancel(data, e, this.options);
      if(data.phase === 0) {
        data.phase = -1;
        return;
      }
      if(data.phase === 1) {
        data.phase = 2;
        if(data.top) {
          let y = data.y;
          if(y > max) {
            clearBorder(topLoading,null, duration);
            cb(() => {stage2End(topLoading);clearHeight(topLoading, data, duration);});
          } else {
            stage1End(topLoading);
            clearBorder(topLoading, data, duration);
            clearHeight(topLoading, data, duration);
          }
        } else {
          // if(data.bottom) {
            let y = -data.y;
            if(y > max) {
              clearBorder(bottomLoading,null, duration);
              cb(() => {stage2End(bottomLoading);clearHeight(bottomLoading, data, duration);});
            } else {
              stage1End(bottomLoading);
              clearBorder(bottomLoading, data, duration);
              clearHeight(bottomLoading, data, duration);
            }
          // }
        }
      }
    });
    ele.addEventListener("touchcancel", (e) => {
    });
  }
}

module.exports = VLoading;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidi1sb2FkaW5nLmNqcy5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL3V0aWxzL2luZGV4LmpzIiwiLi4vc3JjL2NvcmUvZGVmYXVsdC5qcyIsIi4uL3NyYy9jb3JlL2hlbHBlcnMuanMiLCIuLi9zcmMvY29yZS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzZXRTdHlsZSA9IChlbGUsIG9iaikgPT4ge1xuICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhvYmopKSB7XG4gICAgZWxlLnN0eWxlW2tleV0gPSBgJHtvYmpba2V5XX1gO1xuICB9XG59XG5jb25zdCBnZXRTdHlsZSA9IChlbGUsIGF0dHIpID0+IHtcbiAgcmV0dXJuIGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWxlKVthdHRyXTtcbn1cblxuY29uc3QgY2xlYXJCb3JkZXIgPSAoZWxlLCBkYXRhLCBkdXJhdGlvbiA9IDYwMCkgPT4ge1xuICBzZXRTdHlsZShlbGUsIHtcbiAgICBcImJvcmRlckJvdHRvbVwiOiBcIjAgc29saWQgdHJhbnNwYXJlbnRcIixcbiAgICBcInRyYW5zaXRpb25cIjogYGJvcmRlci1ib3R0b20gJHtkdXJhdGlvbn1tc2BcbiAgfSlcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgc2V0U3R5bGUoZWxlLCB7XG4gICAgICBcInRyYW5zaXRpb25cIjogXCJub25lXCJcbiAgICB9KTtcbiAgICAoZGF0YSkgJiYgKGRhdGEucGhhc2UgPSAtMSk7XG4gIH0sIGR1cmF0aW9uKVxufVxuXG5jb25zdCBjbGVhckhlaWdodCA9IChlbGUsIGRhdGEsIGR1cmF0aW9uID0gNjAwKSA9PiB7XG4gIGxldCBjb2xvciA9IGdldFN0eWxlKGVsZSwgXCJiYWNrZ3JvdW5kQ29sb3JcIik7XG4gIHNldFN0eWxlKGVsZSwge1xuICAgIGhlaWdodDogXCIwXCIsXG4gICAgYmFja2dyb3VuZDogY29sb3IsXG4gICAgdHJhbnNpdGlvbjogYGhlaWdodCAke2R1cmF0aW9ufW1zYFxuICB9KVxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBzZXRTdHlsZShlbGUsIHtcbiAgICAgIFwidHJhbnNpdGlvblwiOiBcIm5vbmVcIlxuICAgIH0pO1xuICAgIChkYXRhKSAmJiAoZGF0YS5waGFzZSA9IC0xKTtcbiAgfSwgZHVyYXRpb24pXG59XG5cbmNvbnN0IGNsZWFyTG9hZGluZ0ltZyA9IChlbGUpID0+IHtcbiAgc2V0U3R5bGUoZWxlLCB7XG4gICAgYmFja2dyb3VuZDogXCJub25lXCJcbiAgfSlcbn1cblxuY29uc3Qgc2V0Qm9yZGVyID0gKGVsZSwgdmFsdWUsIGNvbG9yID0gXCIjZjBmMGYwXCIpID0+IHtcbiAgc2V0U3R5bGUoZWxlLCB7XG4gICAgXCJib3JkZXJCb3R0b21cIjogYCR7dmFsdWV9cHggc29saWQgJHtjb2xvcn1gLFxuICAgIHRyYW5zaXRpb246IFwibm9uZVwiLFxuICB9KVxufVxuXG5jb25zdCBzZXRIZWlnaHQgPSAoZWxlLCB2YWx1ZSwgY29sb3IgPVwiI2YwZjBmMFwiKSA9PiB7XG4gIHNldFN0eWxlKGVsZSwge1xuICAgIGhlaWdodDogYCR7dmFsdWV9cHhgLFxuICAgIGJhY2tncm91bmQ6IGNvbG9yLFxuICAgIHRyYW5zaXRpb246IFwibm9uZVwiXG4gIH0pXG59XG5cbmNvbnN0IHNldExvYWRpbmdJbWcgPSAoZWxlLCBzcmM9XCIuL2xvYWRpbmcuZ2lmXCIpID0+IHtcbiAgbGV0IGNvbG9yID0gZ2V0U3R5bGUoZWxlLCBcImJhY2tncm91bmRDb2xvclwiKTtcbiAgc2V0U3R5bGUoZWxlLCB7XG4gICAgYmFja2dyb3VuZDogYHVybCgke3NyY30pIGNlbnRlci80ZW0gbm8tcmVwZWF0ICR7Y29sb3J9YFxuICB9KVxufVxuXG5jb25zdCBkYW1wID0gKHgsIG1heCkgPT4ge1xuICBsZXQgdW5pdCA9ICh4KSA9PiB7XG4gICAgcmV0dXJuIE1hdGguYXRhbih4KSAvIChNYXRoLlBJIC8gMik7XG4gIH1cbiAgbGV0IGNvbnRyYWN0aW9uID0gKHgsIG1heCkgPT4ge1xuICAgIHJldHVybiB4IC8gbWF4O1xuICB9XG4gIHJldHVybiB1bml0KGNvbnRyYWN0aW9uKHgsIG1heCkpICogbWF4O1xufVxuZXhwb3J0IHtcbiAgc2V0U3R5bGUsXG4gIHNldEhlaWdodCxcbiAgc2V0Qm9yZGVyLFxuICBjbGVhckhlaWdodCxcbiAgY2xlYXJCb3JkZXIsXG4gIGRhbXAsXG4gIHNldExvYWRpbmdJbWcsXG4gIGNsZWFyTG9hZGluZ0ltZ1xufVxuIiwiaW1wb3J0IHtjbGVhckxvYWRpbmdJbWcsIHNldExvYWRpbmdJbWd9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgbWF4OiA4MCxcbiAgYmc6IFwiI2YwZjBmMFwiLFxuICBjYjogKCkgPT4ge30sXG4gIHN0YWdlMUJlZ2luOiAoKSA9PiB7fSxcbiAgc3RhZ2UyQmVnaW46IChlbGUpID0+IHtcbiAgICBzZXRMb2FkaW5nSW1nKGVsZSlcbiAgfSxcbiAgc3RhZ2UxRW5kOiAoKSA9PiB7fSxcbiAgc3RhZ2UyRW5kOiAoKSA9PiB7XG4gICAgY2xlYXJMb2FkaW5nSW1nKGVsZSlcbiAgfSxcbiAgc3RhZ2UyOiAoKSA9PiB7fSxcbiAgZHVyYXRpb246IDI1MCxcbn1cbmV4cG9ydCB7XG4gIGRlZmF1bHRPcHRpb25zXG59XG4iLCJjb25zdCB1cGRhdGVEYXRhSW5TdGFydCA9IChkYXRhLCBlLCBvcHRpb25zKSA9PiB7XG4gIGxldCBlbGUgPSBvcHRpb25zLmVsZSxcbiAgW3RvcCwgYm90dG9tXSA9IHRvcEFuZEJvdHRvbShlbGUpO1xuICBpZihkYXRhLnBoYXNlID09PSAtMSAmJiAodG9wIHx8IGJvdHRvbSkpIHtcbiAgICBkYXRhLnN0YXJ0ID0gZS50b3VjaGVzWzBdLnBhZ2VZO1xuICAgIGRhdGEucGhhc2UgPSAwO1xuICAgIGRhdGEudG9wID0gdG9wO1xuICAgIGRhdGEuYm90dG9tID0gYm90dG9tO1xuICB9XG59XG5jb25zdCB1cGRhdGVEYXRhSW5Nb3ZlID0gKGRhdGEsIGUsIG9wdGlvbnMpID0+IHtcbiAgbGV0IG1vdmUgPSBlLnRvdWNoZXNbMF0ucGFnZVksXG4gICAgc3RhcnQgPSBkYXRhLnN0YXJ0LFxuICAgIGVsZSA9IG9wdGlvbnMuZWxlLFxuICAgIFt0b3AsIGJvdHRvbV0gPSB0b3BBbmRCb3R0b20oZWxlKSxcbiAgICB5ID0gbW92ZSAtIHN0YXJ0LFxuICAgIHBvc2l0aXZlID0geSA+PSAwLFxuICAgIG5lZ2F0aXZlID0geSA8PSAwO1xuICBpZihkYXRhLnBoYXNlID09PSAwIHx8IGRhdGEucGhhc2UgPT09IDEpIHtcbiAgICBpZih0b3AgJiYgcG9zaXRpdmUgfHwgYm90dG9tICYmIG5lZ2F0aXZlKSB7XG4gICAgICBkYXRhLnBoYXNlID0gMTtcbiAgICAgIGRhdGEueSA9IHk7XG4gICAgICBkYXRhLnBvc2l0aXZlID0gcG9zaXRpdmU7XG4gICAgICBkYXRhLm5lZ2F0aXZlID0gbmVnYXRpdmU7XG4gICAgICBkYXRhLnRvcCA9IHRvcDtcbiAgICAgIGRhdGEuYm90dG9tID0gYm90dG9tO1xuICAgIH1cbiAgfVxuXG4gIC8vIChkYXRhLnBoYXNlID09PSAwKSAmJiAoZGF0YS5waGFzZSA9IDEpO1xuICAvLyBpZihkYXRhLnBoYXNlID09PSAxKSB7XG4gIC8vICAgZGF0YS55ID0gbW92ZSAtIHN0YXJ0O1xuICAvLyAgIGRhdGEucG9zaXRpdmUgPSBkYXRhLnkgPj0gMDtcbiAgLy8gICBkYXRhLm5lZ2F0aXZlID0gIWRhdGEucG9zaXRpdmU7XG4gIC8vICAgZGF0YS50b3AgPSBlbGUuc2Nyb2xsVG9wID09PSAwO1xuICAvLyAgIGRhdGEuYm90dG9tID0gZWxlLnNjcm9sbFRvcCArIGVsZS5jbGllbnRIZWlnaHQgPT09IGVsZS5zY3JvbGxIZWlnaHQ7XG4gIC8vIH1cbn1cblxuY29uc3QgdXBkYXRlRGF0YUluQ2FuY2VsID0gKGRhdGEsIGUsIG9wdGlvbnMpID0+IHtcbiAgLy8gaWYoZGF0YS50b3AgfHwgZGF0YS5ib3R0b20pIHtcbiAgLy8gICAoZGF0YS5waGFzZSA9PT0gMSkgJiYgKGRhdGEucGhhc2UgPSAyKVxuICAvLyB9XG4gIGxldCBlbGUgPSBvcHRpb25zLmVsZSxcbiAgICBbdG9wLCBib3R0b20gXSA9IHRvcEFuZEJvdHRvbShlbGUpO1xuICBkYXRhLnRvcCA9IHRvcDtcbiAgZGF0YS5ib3R0b20gPSBib3R0b207XG59XG5cbmNvbnN0IHRvcEFuZEJvdHRvbSA9IChlbGUpID0+IHtcbiAgcmV0dXJuIFtcbiAgICBlbGUuc2Nyb2xsVG9wID09PSAwLFxuICAgIGVsZS5zY3JvbGxUb3AgKyBlbGUuY2xpZW50SGVpZ2h0ID49IGVsZS5zY3JvbGxIZWlnaHRcbiAgXVxufVxuXG5leHBvcnQge1xuICB1cGRhdGVEYXRhSW5TdGFydCxcbiAgdXBkYXRlRGF0YUluTW92ZSxcbiAgdXBkYXRlRGF0YUluQ2FuY2VsXG59XG4iLCJpbXBvcnQge2RlZmF1bHRPcHRpb25zfSBmcm9tIFwiLi9kZWZhdWx0XCI7XG5pbXBvcnQge2NsZWFyQm9yZGVyLCBjbGVhckhlaWdodCwgY2xlYXJMb2FkaW5nSW1nLCBzZXRCb3JkZXIsIHNldEhlaWdodCwgc2V0TG9hZGluZ0ltZywgZGFtcH0gZnJvbSBcIi4uL3V0aWxzL2luZGV4XCI7XG5pbXBvcnQge1xuICB1cGRhdGVEYXRhSW5TdGFydCxcbiAgdXBkYXRlRGF0YUluTW92ZSxcbiAgdXBkYXRlRGF0YUluQ2FuY2VsXG59IGZyb20gXCIuL2hlbHBlcnNcIjtcblxuY2xhc3MgVkxvYWRpbmcge1xuICBjb25zdHJ1Y3RvcihlbGUsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmVsZSA9IGVsZTtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zLCB7IGVsZSB9KTtcbiAgICB0aGlzLmRhdGEgPSB7XG4gICAgICB0b3A6IGZhbHNlLCAgICAgLy8g5piv5ZCm6Kem6aG2XG4gICAgICBib3R0b206IGZhbHNlLCAgLy8g5piv5ZCm6Kem5bqVXG4gICAgICB5OiAwLCAgICAgICAgICAgLy8g6Lev56iL5L2N56e7XG4gICAgICBzdGFydDogMCwgICAgICAgLy8g6LW354K55L2N56e7XG4gICAgICBwaGFzZTogLTEsICAgICAgLy8gMDp0b3VjaHN0YXJ0LCAxOnRvdWNobW92ZSwgMjp0b3VjaGVuZC9jYW5jZWwsIC0xLCBubyBldmVudHNcbiAgICB9XG4gICAgdGhpcy5pbnNlcnRUb3BMb2FkaW5nKCk7XG4gICAgdGhpcy5pbnNlcnRCb3R0b21Mb2FkaW5nKCk7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cbiAgaW5zZXJ0VG9wTG9hZGluZygpIHtcbiAgICBjb25zdCBsb2FkaW5nID0gdGhpcy5vcHRpb25zLnRvcExvYWRpbmc7XG4gICAgaWYobG9hZGluZylcbiAgICAgIHJldHVybjtcbiAgICBsZXQgZmlyc3ROb2RlID0gdGhpcy5lbGUuZmlyc3RFbGVtZW50Q2hpbGQsXG4gICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRoaXMuZWxlLmluc2VydEJlZm9yZShkaXYsIGZpcnN0Tm9kZSk7XG4gICAgdGhpcy5vcHRpb25zLnRvcExvYWRpbmcgPSBkaXY7XG4gIH1cbiAgaW5zZXJ0Qm90dG9tTG9hZGluZygpIHtcbiAgICBjb25zdCBib3R0b21Mb2FkaW5nID0gdGhpcy5vcHRpb25zLmJvdHRvbUxvYWRpbmc7XG4gICAgaWYoYm90dG9tTG9hZGluZylcbiAgICAgIHJldHVybjtcbiAgICBsZXQgbGFzdE5vZGUgPSB0aGlzLmVsZS5sYXN0RWxlbWVudENoaWxkLFxuICAgICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0aGlzLmVsZS5pbnNlcnRCZWZvcmUoZGl2LCBsYXN0Tm9kZS5uZXh0U2libGluZyk7XG4gICAgdGhpcy5vcHRpb25zLmJvdHRvbUxvYWRpbmcgPSBkaXY7XG4gIH1cbiAgaW5pdCgpIHtcbiAgICBsZXQgZWxlID0gdGhpcy5lbGUsXG4gICAgICBkYXRhID0gdGhpcy5kYXRhLFxuICAgICAgdG9wTG9hZGluZyA9IHRoaXMub3B0aW9ucy50b3BMb2FkaW5nLFxuICAgICAgYm90dG9tTG9hZGluZyA9IHRoaXMub3B0aW9ucy5ib3R0b21Mb2FkaW5nLFxuICAgICAgY2IgPSB0aGlzLm9wdGlvbnMuY2IsXG4gICAgICBtYXggPSB0aGlzLm9wdGlvbnMubWF4LFxuICAgICAgYmcgPSB0aGlzLm9wdGlvbnMuYmcsXG4gICAgICBkdXJhdGlvbiA9IHRoaXMub3B0aW9ucy5kdXJhdGlvbixcbiAgICAgIHN0YWdlMUJlZ2luID0gdGhpcy5vcHRpb25zLnN0YWdlMUJlZ2luLFxuICAgICAgc3RhZ2UyQmVnaW4gPSB0aGlzLm9wdGlvbnMuc3RhZ2UyQmVnaW4sXG4gICAgICBzdGFnZTFFbmQgPSB0aGlzLm9wdGlvbnMuc3RhZ2UxRW5kLFxuICAgICAgc3RhZ2UyRW5kID0gdGhpcy5vcHRpb25zLnN0YWdlMUVuZDtcbiAgICB3aW5kb3cuZGF0YSA9IGRhdGE7XG4gICAgZWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIChlKSA9PiB7XG4gICAgICB1cGRhdGVEYXRhSW5TdGFydChkYXRhLCBlLCB0aGlzLm9wdGlvbnMpO1xuICAgIH0pXG5cbiAgICBlbGUuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCAoZSkgPT4ge1xuICAgICAgdXBkYXRlRGF0YUluTW92ZShkYXRhLCBlLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgaWYoZGF0YS5waGFzZSA9PT0gMClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgaWYoZGF0YS5waGFzZSA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYoZGF0YS5waGFzZSA9PT0gMikge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmKGRhdGEudG9wKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IHkgPSBkYXRhLnk7XG5cbiAgICAgICAgaWYoeSA+PSBtYXgpIHtcbiAgICAgICAgICB5ID0gKHkgLSBtYXgpIC8gMjtcbiAgICAgICAgICBzdGFnZTJCZWdpbih0b3BMb2FkaW5nKTtcbiAgICAgICAgICBzZXRCb3JkZXIodG9wTG9hZGluZywgeSwgYmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YWdlMUJlZ2luKHRvcExvYWRpbmcpO1xuICAgICAgICAgIHNldEhlaWdodCh0b3BMb2FkaW5nLCB5LCBiZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmKGRhdGEuYm90dG9tKSB7XG4gICAgICAgIC8vIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IHkgPSAtZGF0YS55O1xuICAgICAgICBpZih5ID49IG1heCkge1xuICAgICAgICAgIHkgPSAoeSAtIG1heCkgLyAyO1xuICAgICAgICAgIHN0YWdlMkJlZ2luKGJvdHRvbUxvYWRpbmcpO1xuICAgICAgICAgIHNldEJvcmRlcihib3R0b21Mb2FkaW5nLCB5LCBiZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhZ2UxQmVnaW4oYm90dG9tTG9hZGluZyk7XG4gICAgICAgICAgc2V0SGVpZ2h0KGJvdHRvbUxvYWRpbmcsIHksIGJnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB9XG4gICAgfSwge3Bhc3NpdmU6IGZhbHNlfSlcbiAgICBlbGUuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIChlKSA9PiB7XG4gICAgICB1cGRhdGVEYXRhSW5DYW5jZWwoZGF0YSwgZSwgdGhpcy5vcHRpb25zKTtcbiAgICAgIGlmKGRhdGEucGhhc2UgPT09IDApIHtcbiAgICAgICAgZGF0YS5waGFzZSA9IC0xO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZihkYXRhLnBoYXNlID09PSAxKSB7XG4gICAgICAgIGRhdGEucGhhc2UgPSAyO1xuICAgICAgICBpZihkYXRhLnRvcCkge1xuICAgICAgICAgIGxldCB5ID0gZGF0YS55O1xuICAgICAgICAgIGlmKHkgPiBtYXgpIHtcbiAgICAgICAgICAgIGNsZWFyQm9yZGVyKHRvcExvYWRpbmcsbnVsbCwgZHVyYXRpb24pO1xuICAgICAgICAgICAgY2IoKCkgPT4ge3N0YWdlMkVuZCh0b3BMb2FkaW5nKTtjbGVhckhlaWdodCh0b3BMb2FkaW5nLCBkYXRhLCBkdXJhdGlvbil9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhZ2UxRW5kKHRvcExvYWRpbmcpO1xuICAgICAgICAgICAgY2xlYXJCb3JkZXIodG9wTG9hZGluZywgZGF0YSwgZHVyYXRpb24pO1xuICAgICAgICAgICAgY2xlYXJIZWlnaHQodG9wTG9hZGluZywgZGF0YSwgZHVyYXRpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBpZihkYXRhLmJvdHRvbSkge1xuICAgICAgICAgICAgbGV0IHkgPSAtZGF0YS55O1xuICAgICAgICAgICAgaWYoeSA+IG1heCkge1xuICAgICAgICAgICAgICBjbGVhckJvcmRlcihib3R0b21Mb2FkaW5nLG51bGwsIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgY2IoKCkgPT4ge3N0YWdlMkVuZChib3R0b21Mb2FkaW5nKTtjbGVhckhlaWdodChib3R0b21Mb2FkaW5nLCBkYXRhLCBkdXJhdGlvbil9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHN0YWdlMUVuZChib3R0b21Mb2FkaW5nKTtcbiAgICAgICAgICAgICAgY2xlYXJCb3JkZXIoYm90dG9tTG9hZGluZywgZGF0YSwgZHVyYXRpb24pO1xuICAgICAgICAgICAgICBjbGVhckhlaWdodChib3R0b21Mb2FkaW5nLCBkYXRhLCBkdXJhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgLy8gfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICBlbGUuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsIChlKSA9PiB7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
